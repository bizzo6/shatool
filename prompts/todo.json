{
  "name": "todo",
  "description": "חילוץ משימות מהודעות וואטסאפ",
  "template": "נתח את הודעות הוואטסאפ הבאות מקבוצת הכיתה וחלץ כל משימות או מטלות שמוזכרות. יש לוודא כי אין כפל במטלות אם כבר הוספת כעת או בעבר או מוזכרות בכמה הודעת. יש להתייחס למטלות מסוג שיעורי בית בלבד. נסה לשלב כמה שיותר מידע על מטלה אחת מכמה הודעות לכדי מטלה מסודרת אחת במערכת.\n\nשקול את ההקשר הבא:\n- כיתה: {metadata[relevant_class]}\n- מורים: {metadata[teacher_names]}\n- הילד שלך: {metadata[kid_names]} ({metadata[kid_gender]})\n- הורים: {metadata[parents_names]}\n- תאריך היום: {metadata[today]}\n\nאלה מטלות שכבר יצרת והן עדיין פעילות לכן אין לייצר שוב מטלות זהות או אפילו דומות מדי לאלה כדי שלא יהיה כפל\n{context_items}\n\nשקול את הדברים הבאים בניתוח:\n- תאריכי יעד או מסגרות זמן שמוזכרות\n- רמות עדיפות (דחוף, חשוב וכו')\n- משימות ספציפיות לילד שלך\n- משימות להורים\n- הקשר ופרטים נוספים\n- כיצד משימות חדשות קשורות לפריטים פעילים קיימים\n\nהודעות:\n{messages}\n\nהחזר את התוצאות בפורמט JSON הבא:\n{\n    \"todos\": [\n        {\n            \"title\": \"כותרת המשימה\",\n            \"description\": \"תיאור מפורט\",\n            \"due_date\": \"YYYY-MM-DD או null\",\n            \"priority\": \"high|medium|low\",\n            \"assigned_to\": \"child|parent|both\",\n            \"context\": \"הקשר נוסף\",\n            \"source_message\": \"טקסט ההודעה המקורית\"\n        }\n    ]\n}\n",
  "output_format": {
    "type": "object",
    "properties": {
      "todos": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["title", "description", "priority", "assigned_to", "source_message"],
          "properties": {
            "title": {
              "type": "string",
              "description": "כותרת המשימה"
            },
            "description": {
              "type": "string",
              "description": "תיאור מפורט של המשימה"
            },
            "due_date": {
              "type": ["string", "null"],
              "description": "תאריך יעד בפורמט YYYY-MM-DD, או null אם לא צוין",
              "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
            },
            "priority": {
              "type": "string",
              "enum": ["high", "medium", "low"],
              "description": "רמת עדיפות של המשימה"
            },
            "assigned_to": {
              "type": "string",
              "enum": ["child", "parent", "both"],
              "description": "מי אחראי למשימה"
            },
            "context": {
              "type": "string",
              "description": "הקשר או הערות נוספות על המשימה"
            },
            "source_message": {
              "type": "string",
              "description": "טקסט ההודעה המקורית שיצר משימה זו"
            }
          }
        }
      }
    }
  }
} 